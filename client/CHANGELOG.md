# 更新日志

本文档记录了知识库管理系统的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.1.0] - 2024-11-09

### 新增
- ✨ **代码备份功能** - 支持备份前后端代码文件
- 🔧 **数据库管理器** - 动态数据库连接管理
- 📧 **邮件模板系统** - 可视化邮件模板编辑
- 🎫 **工单系统** - 完整的客服支持系统
- 🌍 **时区支持** - 多时区配置和自动转换
- 📊 **实时监控** - 系统状态和性能监控
- 🔒 **滑块验证码** - 增强安全防护
- 📱 **响应式优化** - 移动端体验改进
- 💱 **实时汇率** - 支持实时汇率更新
- 🎁 **推荐追踪系统** - 完整的推荐访问追踪

### 改进
- 🎨 **UI/UX 优化** - 界面美化和交互改进
- ⚡ **性能优化** - 数据库查询和前端渲染优化
- 🔐 **安全加强** - API 频率限制和输入验证
- 📝 **文档完善** - 添加详细的部署和使用文档
- 🧪 **测试覆盖** - 增加自动化测试脚本
- 🔄 **搜索优化** - 改进搜索性能和超时处理

### 修复
- 🐛 修复用户注册时的积分记录问题
- 🐛 修复推荐系统的佣金计算错误
- 🐛 修复邮件发送的编码问题
- 🐛 修复前端路由的权限验证
- 🐛 修复数据库连接的超时问题
- 🐛 修复管理后台的统计数据显示
- 🐛 修复时区转换的日期问题

### 技术改进
- 🔧 重构数据库连接管理
- 🔧 优化错误处理机制
- 🔧 改进日志记录系统
- 🔧 升级依赖包版本
- 🔧 实现版本管理和回滚功能

## [1.0.0] - 2024-10-01

### 新增
- 🎉 **初始版本发布**
- 👥 **用户管理系统**
  - 用户注册、登录、密码重置
  - 用户资料管理
  - VIP 等级系统
- 📚 **知识库功能**
  - 文档创建和编辑
  - 分类管理
  - 全文搜索
- 💰 **积分系统**
  - 积分获取和消费
  - 积分历史记录
  - 积分配置管理
- 🎁 **推荐奖励系统**
  - 多级推荐
  - 佣金分成
  - 推荐统计
- 💳 **充值系统**
  - 在线支付
  - 充值卡系统
  - 充值记录
- 💸 **提现管理**
  - 余额提现
  - 提现审核
  - 提现记录
- 🛠️ **管理后台**
  - 用户管理
  - 系统配置
  - 数据统计
  - 财务报表
- 🗄️ **备份系统**
  - 数据库备份
  - 自动备份
  - 备份恢复

### 技术栈
- **前端**: React 18 + TypeScript + Tailwind CSS
- **后端**: Node.js + Express + MongoDB
- **部署**: PM2 + Nginx

---

## 版本说明

### 版本号格式
版本号格式为 `主版本号.次版本号.修订号`，例如 `1.2.3`：

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 更新类型
- 🎉 **重大更新** - 新版本发布
- ✨ **新增** - 新功能
- 🎨 **改进** - 功能改进和优化
- 🐛 **修复** - Bug 修复
- 🔧 **技术** - 技术改进
- 📝 **文档** - 文档更新
- 🔒 **安全** - 安全相关更新
- ⚡ **性能** - 性能优化
- 🗑️ **移除** - 移除功能

### 支持政策
- **当前版本 (1.1.x)**: 完全支持，持续更新
- **上一版本 (1.0.x)**: 安全更新和重要 Bug 修复
- **更早版本**: 不再支持，建议升级

---

## 升级指南

### 从 1.0.x 升级到 1.1.x

1. **备份数据**
```bash
# 创建数据备份
node server/scripts/createBackup.js
```

2. **更新代码**
```bash
git pull origin main
npm run install-all
```

3. **运行迁移脚本**（如有需要）
```bash
node server/scripts/migrate.js
```

4. **重启服务**
```bash
pm2 restart all
```

### 注意事项
- 升级前请务必备份数据
- 建议在测试环境先验证升级过程
- 如遇问题可回滚到备份版本

---

📝 **说明**: 本更新日志遵循 [Keep a Changelog](https://keepachangelog.com/) 规范。
