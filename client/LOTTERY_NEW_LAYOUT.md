# 抽奖系统 - Dashboard布局 ✅

## 布局变更

已将抽奖页面改为**Dashboard风格布局**（左侧边栏 + 右侧主内容）：

### 左侧区域（侧边栏导航）
- 使用 `<Layout showSidebar>` 组件
- 自动显示用户中心导航菜单
- 包含：概览、商城、订单、充值、推荐、佣金、积分、工单、抽奖、个人资料等

### 右侧区域（主内容）
- 标签切换：抽奖活动 / 我的记录
- 活动选择：网格布局显示所有可用活动
- 老虎机显示：选择活动后在下方显示老虎机
- 抽奖记录：切换到记录标签查看历史

## 用户交互流程

1. **进入页面**
   - 左侧显示侧边栏导航（和Dashboard一样）
   - 右侧显示抽奖活动网格
   - 默认显示"请选择活动"提示

2. **选择活动**
   - 点击任意活动卡片
   - 选中的活动卡片会有蓝色边框高亮和背景色
   - 页面下方立即显示该活动的老虎机

3. **开始抽奖**
   - 点击老虎机上的"立即抽奖"按钮
   - 检查用户是否充值
   - 未充值：显示充值提示弹窗
   - 已充值：开始抽奖动画

4. **查看结果**
   - 老虎机显示抽奖动画
   - 动画结束后显示结果
   - 使用toast提示中奖信息
   - 3秒后自动清除结果，可继续抽奖

5. **查看记录**
   - 切换到"我的记录"标签
   - 显示历史记录列表
   - 可以领取待领取的奖品

## 响应式设计

### 大屏幕（md及以上）
- 左侧：固定宽度侧边栏导航
- 右侧：主内容区域，活动网格2列显示
- 老虎机在活动下方居中显示

### 小屏幕（md以下）
- 侧边栏可折叠（点击菜单按钮显示）
- 活动网格1列显示
- 老虎机在活动下方全宽显示

## 主要优势

1. **统一体验**：与Dashboard概览页面保持一致的布局风格
2. **导航便捷**：左侧侧边栏可快速切换到其他功能
3. **布局清晰**：活动选择和抽奖操作分区明确
4. **操作流畅**：选择活动后立即显示老虎机，无需弹窗

## 技术实现

### 状态管理
```typescript
const [currentActivity, setCurrentActivity] = useState<any>(null); // 当前选中的活动
const [drawing, setDrawing] = useState(false); // 是否正在抽奖
const [result, setResult] = useState<any>(null); // 抽奖结果
const [activeTab, setActiveTab] = useState<'draw' | 'records'>('draw'); // 当前标签
```

### 关键功能
- `handleDraw(activity)`: 选择活动
- `handleStartDraw()`: 开始抽奖（检查充值状态）
- `handleAnimationComplete()`: 动画完成后的处理

### 样式特点
- 使用 `<Layout showSidebar>` 组件实现侧边栏
- 活动网格：`grid grid-cols-1 md:grid-cols-2` 响应式布局
- 选中状态：`ring-2 ring-blue-500 bg-blue-50` 蓝色边框和背景
- 老虎机容器：渐变背景 `bg-gradient-to-br from-blue-50 to-purple-50`

## 文件变更

- ✅ `src/pages/Dashboard/Lottery.tsx` - 重构为左右布局
- ✅ `src/components/SlotMachine.tsx` - 保持不变，支持静态显示
- ✅ `src/components/Layout/Sidebar.tsx` - 已添加抽奖入口

## 测试建议

1. **布局测试**
   - 在不同屏幕尺寸下测试响应式布局
   - 验证粘性定位在大屏幕上的效果

2. **交互测试**
   - 点击不同活动，验证右侧老虎机切换
   - 测试抽奖流程的完整性

3. **状态测试**
   - 未选择活动时的提示显示
   - 选中活动的高亮效果
   - 抽奖中的禁用状态

4. **充值检查测试**
   - 未充值用户点击抽奖的提示
   - 已充值用户的正常抽奖流程

## 后续优化建议

1. 可以添加活动详情展开/收起功能
2. 可以添加奖品预览轮播
3. 可以添加抽奖历史统计图表
4. 可以添加音效和更丰富的动画效果
