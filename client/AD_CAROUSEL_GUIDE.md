# 图片轮播广告使用指南

## 🎯 功能说明

新增了图片轮播广告功能，与现有的HTML广告完全兼容，可以同时使用两种类型的广告。

## ✨ 特性

- ✅ 多张图片自动轮播
- ✅ 可点击跳转链接
- ✅ 自定义切换间隔
- ✅ 自定义高度
- ✅ 左右箭头控制
- ✅ 底部指示器
- ✅ 鼠标悬停暂停
- ✅ 平滑过渡动画
- ✅ 与现有HTML广告兼容

## 📋 使用步骤

### 1. 创建轮播广告

1. 登录管理后台
2. 进入 **内容管理** > **广告管理**
3. 点击 **添加广告**
4. 选择广告类型为 **图片轮播广告**

### 2. 配置轮播图片

#### 图片URL
在"轮播图片URL"文本框中，每行输入一个图片地址：

```
https://example.com/banner1.jpg
https://example.com/banner2.jpg
https://example.com/banner3.jpg
```

**要求**：
- 每行一个URL
- 支持http://和https://
- 推荐使用相同尺寸的图片
- 推荐格式：JPG、PNG、WebP

#### 对应链接（可选）
在"对应链接URL"文本框中，每行输入一个跳转链接：

```
https://example.com/product1
https://example.com/product2
https://example.com/product3
```

**说明**：
- 每行一个URL
- 与图片URL一一对应
- 留空则图片不可点击
- 点击图片会在新标签页打开链接

### 3. 配置轮播参数

#### 切换间隔
- **默认值**: 5000毫秒（5秒）
- **最小值**: 1000毫秒（1秒）
- **推荐值**: 3000-8000毫秒

#### 高度
- **默认值**: 400px
- **格式**: 数字+单位（如 300px, 50vh）
- **推荐值**: 
  - 横幅广告：300px-400px
  - 大图广告：500px-600px

#### 显示选项
- **显示箭头**: 左右切换按钮（默认开启）
- **显示指示器**: 底部圆点指示器（默认开启）

### 4. 其他设置

- **广告标题**: 用于管理识别
- **显示位置**: 选择广告显示的页面
- **排序**: 数字越小越靠前
- **开始/结束日期**: 可选，控制广告展示时间
- **启用**: 勾选后广告才会显示

### 5. 保存并查看

点击"保存"按钮，然后访问对应页面查看效果。

## 🎨 配置示例

### 示例1：标准横幅轮播
```
广告类型: 图片轮播广告
图片URL:
  https://cdn.example.com/banner1.jpg
  https://cdn.example.com/banner2.jpg
  https://cdn.example.com/banner3.jpg
链接URL:
  https://example.com/promo1
  https://example.com/promo2
  https://example.com/promo3
切换间隔: 5000
高度: 400px
显示箭头: ✓
显示指示器: ✓
```

### 示例2：快速切换轮播
```
广告类型: 图片轮播广告
图片URL:
  https://cdn.example.com/ad1.jpg
  https://cdn.example.com/ad2.jpg
链接URL:
  https://example.com/sale
  https://example.com/new
切换间隔: 3000
高度: 300px
显示箭头: ✓
显示指示器: ✓
```

### 示例3：纯展示轮播（无链接）
```
广告类型: 图片轮播广告
图片URL:
  https://cdn.example.com/showcase1.jpg
  https://cdn.example.com/showcase2.jpg
  https://cdn.example.com/showcase3.jpg
链接URL: （留空）
切换间隔: 6000
高度: 500px
显示箭头: ✓
显示指示器: ✓
```

## 🔄 与HTML广告的兼容性

### 两种广告可以共存

**场景1：同一位置混合使用**
```
搜索页面广告：
  1. 轮播广告（排序: 1）
  2. HTML广告（排序: 2）
  3. 轮播广告（排序: 3）
```

**场景2：不同位置使用**
```
搜索页面: 轮播广告
首页: HTML广告
数据库列表: 轮播广告
```

### 广告类型对比

| 特性 | HTML广告 | 轮播广告 |
|------|---------|---------|
| 内容类型 | HTML代码 | 图片URL |
| 交互性 | 支持任意HTML | 点击跳转 |
| 动画效果 | 需自己实现 | 内置轮播 |
| 配置难度 | 需要HTML知识 | 简单配置 |
| 适用场景 | 复杂布局 | 图片展示 |

## 📐 推荐的图片尺寸

### 横幅广告
```
尺寸: 1200x300px 或 1920x400px
比例: 4:1
高度设置: 300px-400px
```

### 大图广告
```
尺寸: 1200x600px 或 1920x800px
比例: 2:1
高度设置: 500px-600px
```

### 方形广告
```
尺寸: 800x800px
比例: 1:1
高度设置: 400px-600px
```

## 🎯 最佳实践

### 1. 图片优化
- ✅ 使用相同尺寸的图片
- ✅ 压缩图片大小（推荐<500KB）
- ✅ 使用WebP格式（更小的文件）
- ✅ 使用CDN加速

### 2. 切换间隔
- ✅ 不要太快（<3秒）
- ✅ 不要太慢（>10秒）
- ✅ 推荐5-8秒

### 3. 图片数量
- ✅ 3-5张最佳
- ⚠️ 不要超过10张
- ❌ 避免只有1张（失去轮播意义）

### 4. 链接设置
- ✅ 确保链接有效
- ✅ 使用https://
- ✅ 测试链接可访问性

### 5. 用户体验
- ✅ 保持显示箭头（方便手动切换）
- ✅ 保持显示指示器（显示进度）
- ✅ 图片内容清晰可读
- ✅ 避免过于花哨的图片

## 🔧 技术细节

### 前端组件
**文件**: `src/components/AdCarousel.tsx`

**功能**:
- 自动轮播
- 手动切换
- 鼠标悬停暂停
- 平滑过渡动画
- 响应式设计

### 数据库字段
**模型**: `server/models/Advertisement.js`

```javascript
{
  type: 'carousel',              // 广告类型
  carouselImages: [              // 图片URL数组
    'https://...',
    'https://...'
  ],
  carouselLinks: [               // 链接URL数组
    'https://...',
    'https://...'
  ],
  carouselInterval: 5000,        // 切换间隔
  carouselHeight: '400px',       // 高度
  showControls: true,            // 显示箭头
  showIndicators: true           // 显示指示器
}
```

### 显示逻辑
**文件**: `src/pages/Search.tsx`

```tsx
{advertisements.map((ad) => {
  if (ad.type === 'carousel') {
    return <AdCarousel {...ad} />;
  }
  return <div dangerouslySetInnerHTML={{ __html: ad.content }} />;
})}
```

## 🐛 常见问题

### Q1: 图片不显示？
**A**: 检查图片URL是否正确，是否可以访问

### Q2: 轮播不自动切换？
**A**: 检查切换间隔是否设置，是否鼠标悬停在上面

### Q3: 点击图片没反应？
**A**: 检查是否设置了对应的链接URL

### Q4: 图片变形？
**A**: 使用相同尺寸的图片，或调整高度设置

### Q5: 如何删除轮播广告？
**A**: 在广告列表中点击删除按钮

### Q6: 可以修改已有的HTML广告为轮播吗？
**A**: 可以，编辑广告时修改类型即可

### Q7: 轮播广告会影响现有广告吗？
**A**: 不会，两种类型完全兼容

## 📝 更新日志

### 新增功能
- ✅ 图片轮播组件
- ✅ 轮播广告管理界面
- ✅ 数据库模型扩展
- ✅ 前端显示逻辑

### 保持兼容
- ✅ 现有HTML广告正常工作
- ✅ 现有API接口不变
- ✅ 现有数据不受影响

## ✅ 总结

**轮播广告功能已完成**：
- 创建轮播广告：内容管理 > 广告管理 > 添加广告
- 选择类型：图片轮播广告
- 配置图片：每行一个URL
- 配置链接：每行一个URL（可选）
- 设置参数：间隔、高度、显示选项
- 保存查看：访问对应页面

**与HTML广告完全兼容，可以混合使用！** 🎉
