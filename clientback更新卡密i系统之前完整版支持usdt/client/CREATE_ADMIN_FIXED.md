# âœ… ç®¡ç†å‘˜åˆ›å»ºè„šæœ¬å·²ä¿®å¤

## ğŸ› é—®é¢˜åŸå› 

è„šæœ¬æ‰¾ä¸åˆ°æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼Œå› ä¸ºï¼š
1. `.env` æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯ `USER_MONGO_URI`
2. è„šæœ¬ä¸­æŸ¥æ‰¾çš„æ˜¯ `MONGODB_USER_URI`

## ğŸ”§ å·²ä¿®å¤

æ‰€æœ‰è„šæœ¬ç°åœ¨æ”¯æŒä¸¤ç§ç¯å¢ƒå˜é‡åï¼š
- âœ… `MONGODB_USER_URI`ï¼ˆæ–°ï¼‰
- âœ… `USER_MONGO_URI`ï¼ˆç°æœ‰ï¼‰

## ğŸš€ ç°åœ¨å¯ä»¥ä½¿ç”¨äº†ï¼

### æ­£ç¡®çš„ä½¿ç”¨æ–¹æ³•

**1. ç¡®ä¿åœ¨æ­£ç¡®çš„ç›®å½•**
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•
cd server

# æˆ–è€…å¦‚æœå·²ç»åœ¨ client ç›®å½•
cd ../server
```

**2. è¿è¡Œåˆ›å»ºè„šæœ¬**
```bash
node scripts/createAdmin.js
```

**é¢„æœŸè¾“å‡ºï¼š**
```
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
âœ… ç®¡ç†å‘˜è´¦å·åˆ›å»ºæˆåŠŸï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“§ é‚®ç®±: admin@example.com
ğŸ‘¤ ç”¨æˆ·å: admin
ğŸ”‘ å¯†ç : admin123456
ğŸ‘‘ è§’è‰²: ç®¡ç†å‘˜
ğŸ’° åˆå§‹ç§¯åˆ†: 10000
ğŸ’µ åˆå§‹ä½™é¢: 10000
â­ VIPçŠ¶æ€: æ˜¯
ğŸ« æ¨èç : XXXXXXXX
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ“ å®Œæ•´æ­¥éª¤

### ä»é¡¹ç›®æ ¹ç›®å½•å¼€å§‹

```bash
# 1. è¿›å…¥serverç›®å½•
cd server

# 2. åˆ›å»ºç®¡ç†å‘˜
node scripts/createAdmin.js

# 3. ç™»å½•æµ‹è¯•
# è®¿é—®: http://localhost:5173/login
# é‚®ç®±: admin@example.com
# å¯†ç : admin123456
```

---

## ğŸ› ï¸ å…¶ä»–è„šæœ¬

### é‡ç½®ç®¡ç†å‘˜å¯†ç 
```bash
cd server
node scripts/resetAdminPassword.js
```

### æŸ¥çœ‹æ‰€æœ‰ç®¡ç†å‘˜
```bash
cd server
node scripts/listAdmins.js
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç›®å½•ä½ç½®å¾ˆé‡è¦
å¿…é¡»åœ¨ `server` ç›®å½•ä¸‹è¿è¡Œè„šæœ¬ï¼Œå› ä¸ºï¼š
- `.env` æ–‡ä»¶åœ¨ `server/` ç›®å½•
- `dotenv` ä¼šåœ¨å½“å‰ç›®å½•æŸ¥æ‰¾ `.env`

### 2. é”™è¯¯çš„ç›®å½•ç¤ºä¾‹
```bash
# âŒ é”™è¯¯ - åœ¨ client/server ç›®å½•
E:\vscodefile\knowbase2\client\server> node scripts/createAdmin.js

# âœ… æ­£ç¡® - åœ¨ server ç›®å½•
E:\vscodefile\knowbase2\server> node scripts/createAdmin.js
```

### 3. å¦‚æœä»ç„¶æŠ¥é”™
æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
```bash
# åœ¨ server ç›®å½•ä¸‹
dir .env

# æˆ–è€…
ls -la .env
```

---

## ğŸ” æ•…éšœæ’é™¤

### é”™è¯¯1ï¼šæ‰¾ä¸åˆ° .env æ–‡ä»¶
```
âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ°æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
```

**è§£å†³ï¼š**
1. ç¡®è®¤åœ¨ `server` ç›®å½•
2. æ£€æŸ¥ `.env` æ–‡ä»¶å­˜åœ¨
3. æ£€æŸ¥ `.env` ä¸­æœ‰ `USER_MONGO_URI`

### é”™è¯¯2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
```
MongoServerError: Authentication failed
```

**è§£å†³ï¼š**
1. æ£€æŸ¥MongoDBæœåŠ¡æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥ `.env` ä¸­çš„æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
3. ç¡®è®¤ç”¨æˆ·åå¯†ç æ­£ç¡®

### é”™è¯¯3ï¼šç®¡ç†å‘˜å·²å­˜åœ¨
```
âš ï¸ ç®¡ç†å‘˜è´¦å·å·²å­˜åœ¨
```

**è§£å†³ï¼š**
- ä½¿ç”¨ç°æœ‰è´¦å·ç™»å½•
- æˆ–è¿è¡Œé‡ç½®å¯†ç è„šæœ¬

---

## âœ… éªŒè¯æˆåŠŸ

åˆ›å»ºæˆåŠŸåï¼ŒéªŒè¯ä»¥ä¸‹å†…å®¹ï¼š

1. **ç™»å½•æµ‹è¯•**
   - è®¿é—®ï¼šhttp://localhost:5173/login
   - ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•

2. **è®¿é—®ç®¡ç†åå°**
   - è®¿é—®ï¼šhttp://localhost:5173/admin
   - åº”è¯¥èƒ½çœ‹åˆ°ç®¡ç†å‘˜ç•Œé¢

3. **æ£€æŸ¥æƒé™**
   - å¯ä»¥è®¿é—®æ‰€æœ‰ç®¡ç†é¡µé¢
   - å¯ä»¥ç®¡ç†ç”¨æˆ·
   - å¯ä»¥ä¿®æ”¹è®¾ç½®

---

## ğŸ“Š æ•°æ®åº“éªŒè¯

### ä½¿ç”¨MongoDB ShelléªŒè¯

```bash
# è¿æ¥æ•°æ®åº“
mongosh "mongodb://chroot:Ubuntu123!@172.16.254.15:27017/userdata?authSource=admin"

# æŸ¥çœ‹ç®¡ç†å‘˜
db.users.find({ role: "admin" }).pretty()
```

**åº”è¯¥çœ‹åˆ°ï¼š**
```javascript
{
  _id: ObjectId("..."),
  username: "admin",
  email: "admin@example.com",
  role: "admin",
  points: 10000,
  balance: 10000,
  isVip: true,
  // ...
}
```

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### ä¸€é”®åˆ›å»ºç®¡ç†å‘˜
```bash
cd server && node scripts/createAdmin.js
```

### ç™»å½•ä¿¡æ¯
- **URLï¼š** http://localhost:5173/login
- **é‚®ç®±ï¼š** admin@example.com
- **å¯†ç ï¼š** admin123456

### ç®¡ç†åå°
- **URLï¼š** http://localhost:5173/admin

---

**ä¿®å¤æ—¶é—´ï¼š** 2024-10-19  
**çŠ¶æ€ï¼š** âœ… å·²ä¿®å¤ï¼Œå¯ä»¥ä½¿ç”¨
